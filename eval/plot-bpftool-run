#!/usr/bin/Rscript

source("plotlib.R")


## DATA <- DATA %>%
##   filter(burst_pos == max(burst_pos))

summary(DATA)

cns <- colnames(DATA)
metrics <- cns[startsWith(cns, "bpftool_run_duration")]

for (m in metrics) {
  print(m)
  ggplot(DATA, aes(y=paste(BPF_OBJ, bpftool_prog), x=get(m), colour=MERGE_CONFIGS)) +
    geom_boxplot() +
    scale_x_log10() +
    facet_grid(rows=vars(T, bpftool_run_exitcode),
               cols=vars(CPUFREQ, bench_script),
               labeller=label_both, scales="free")
  eval_save(paste0(m, "-point"))
}
